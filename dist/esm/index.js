import{delegateEvents as e,style as t,insert as n,template as o,use as s,createComponent as r,Dynamic as a,mergeProps as i,effect as d,className as l}from"solid-js/web";import{createSignal as c,createEffect as u,onMount as p,Show as m,For as g}from"solid-js";let C=function(e){return e[e.Unmounted=0]="Unmounted",e[e.Opening=1]="Opening",e[e.Opened=2]="Opened",e[e.Closing=3]="Closing",e[e.Closed=4]="Closed",e}({});const f=e=>{const t={animation:e?.animation??{keyframes:[{opacity:0,transform:"translateY(0.25rem) scale(0.9)"},{opacity:1,transform:"translateY(0) scale(1)"}],duration:.125,easing:"ease"},zIndex:e?.zIndex??9999},[n,o]=c([]);return{nextID:0,modals:n,setModals:o,...t}},v=(e,t,n,o)=>{const s=1e3*e.animation.duration;t.animate(e.animation.keyframes,{duration:s,direction:n?"reverse":"normal",fill:"forwards",easing:e.animation.easing}),setTimeout(o,s)},x=(e,t,n,o)=>{const s=(e=>{const t=e.nextID.toString(36);return e.nextID++,t})(e),[r,a]=c(C.Unmounted),i={id:s,component:t,props:n,lc:r,setLC:a,options:o??{}};return e.setModals((e=>[...e,i])),s},O=(e,t)=>{const n=((e,t)=>{const n=e.modals();for(const e of n)if(e.id===t)return e})(e,t);if(void 0===n)return;const o=n.options.onClose;return(!o||!1!==o())&&(n.setLC(C.Closing),!0)};var b=o("<div class=modal-box>");const h=e=>{let o;const r={position:"absolute",inset:"0"},a=t=>{t.target===o&&O(e.state,e.id)};return u((()=>{switch(e.lc()){case C.Opening:e.options.onCreate?.(),v(e.state,o,!1,(()=>{e.setLC(C.Opened)}));break;case C.Opened:e.options.onOpened?.();break;case C.Closing:v(e.state,o,!0,(()=>{e.setLC(C.Closed)}));break;case C.Closed:t=e.state,n=e.id,t.setModals((e=>e.filter((e=>e.id!==n)))),e.options.onDelete?.()}var t,n})),p((()=>{e.setLC(C.Opening)})),(()=>{var i=b();i.$$click=a;return"function"==typeof o?s(o,i):o=i,t(i,r),n(i,(()=>e.children)),i})()};e(["click"]);var k=o("<div>");const L=e=>{const o={position:"absolute",inset:"0","background-color":"#0002","z-index":e.state.zIndex,...e.style};return r(m,{get when(){return e.state.modals().length>0},get children(){var s=k();return n(s,r(g,{get each(){return e.state.modals()},children:t=>r(h,{get id(){return t.id},get state(){return e.state},get options(){return t.options},get lc(){return t.lc},get setLC(){return t.setLC},get children(){return r(a,i({get component(){return t.component}},(()=>t.props),{close:()=>O(e.state,t.id)}))}})})),d((n=>{var r=`modal-container ${e.class}`,a=o;return r!==n.e&&l(s,n.e=r),n.t=t(s,a,n.t),n}),{e:void 0,t:void 0}),s}})};export{L as ModalContainer,O as closeModal,f as createModalState,x as openModal};
//# sourceMappingURL=index.js.map
