"use strict";var e=require("solid-js/web"),t=require("solid-js");let n=function(e){return e[e.Unmounted=0]="Unmounted",e[e.Opening=1]="Opening",e[e.Opened=2]="Opened",e[e.Closing=3]="Closing",e[e.Closed=4]="Closed",e}({});const o=(e,t,n,o)=>{const s=1e3*e.animation.duration;t.animate(e.animation.keyframes,{duration:s,direction:n?"reverse":"normal",fill:"forwards",easing:e.animation.easing}),setTimeout(o,s)},s=(e,t)=>{const o=((e,t)=>{const n=e.modals();for(const e of n)if(e.id===t)return e})(e,t);if(void 0===o)return;const s=o.options.onClose;return(!s||!1!==s())&&(o.setLC(n.Closing),!0)};var r=e.template("<div class=modal-box>");const a=a=>{let i;const l={position:"absolute",inset:"0"},c=e=>{e.target===i&&s(a.state,a.id)};return t.createEffect((()=>{switch(a.lc()){case n.Opening:a.options.onCreate?.(),o(a.state,i,!1,(()=>{a.setLC(n.Opened)}));break;case n.Opened:a.options.onOpened?.();break;case n.Closing:o(a.state,i,!0,(()=>{a.setLC(n.Closed)}));break;case n.Closed:e=a.state,t=a.id,e.setModals((e=>e.filter((e=>e.id!==t)))),a.options.onDelete?.()}var e,t})),t.onMount((()=>{a.setLC(n.Opening)})),(()=>{var t=r();t.$$click=c;var n=i;return"function"==typeof n?e.use(n,t):i=t,e.style(t,l),e.insert(t,(()=>a.children)),t})()};e.delegateEvents(["click"]);var i=e.template("<div>");exports.ModalContainer=n=>{const o={position:"absolute",inset:"0","background-color":"#0002","z-index":n.state.zIndex,...n.style};return e.createComponent(t.Show,{get when(){return n.state.modals().length>0},get children(){var r=i();return e.insert(r,e.createComponent(t.For,{get each(){return n.state.modals()},children:t=>e.createComponent(a,{get id(){return t.id},get state(){return n.state},get options(){return t.options},get lc(){return t.lc},get setLC(){return t.setLC},get children(){return e.createComponent(e.Dynamic,e.mergeProps({get component(){return t.component}},(()=>t.props),{close:()=>s(n.state,t.id)}))}})})),e.effect((t=>{var s=`modal-container ${n.class}`,a=o;return s!==t.e&&e.className(r,t.e=s),t.t=e.style(r,a,t.t),t}),{e:void 0,t:void 0}),r}})},exports.closeModal=s,exports.createModalState=e=>{const n={animation:e?.animation??{keyframes:[{opacity:0,transform:"translateY(0.25rem) scale(0.9)"},{opacity:1,transform:"translateY(0) scale(1)"}],duration:.125,easing:"ease"},zIndex:e?.zIndex??9999},[o,s]=t.createSignal([]);return{nextID:0,modals:o,setModals:s,...n}},exports.openModal=(e,o,s,r)=>{const a=(e=>{const t=e.nextID.toString(36);return e.nextID++,t})(e),[i,l]=t.createSignal(n.Unmounted),c={id:a,component:o,props:s,lc:i,setLC:l,options:r??{}};return e.setModals((e=>[...e,c])),a};
//# sourceMappingURL=index.js.map
